var Banner=function(){function g(a){var b=a.parentNode,d=a.width;a=a.height;this.scene=new THREE.Scene;this.camera=new THREE.PerspectiveCamera(75,d/a,1,15E3);this.camera.position.z=30;var c=new THREE.AmbientLight(16777215);this.scene.add(c);c=new THREE.DirectionalLight(16777215,.125);c.position.set(0,-1,0).normalize();this.scene.add(c);c=THREE.ImageUtils.loadTexture("/src/theme/img/lensflare0bw.png");c=new THREE.SpriteMaterial({map:c,color:16777215,fog:!0,blending:THREE.AdditiveBlending});this.sprite1=
new THREE.Sprite(c);this.sprite1.position.set(0,0,0);this.sprite1.scale.set(50,50,50);this.scene.add(this.sprite1);c=THREE.ImageUtils.loadTexture("/src/theme/img/lensflare0bw.png");c=new THREE.SpriteMaterial({map:c,color:16777215,fog:!0,blending:THREE.AdditiveBlending});this.sprite2=new THREE.Sprite(c);this.sprite2.position.set(0,0,0);this.sprite2.scale.set(50,50,50);this.scene.add(this.sprite2);this.renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0});this.renderer.setPixelRatio(window.devicePixelRatio);
this.renderer.setSize(d,a);b.style.height=a+"px";b.appendChild(this.renderer.domElement)}function h(a,b){this.functions=a?a:[];this.clock=new THREE.Clock(!0);this.cv=b}function e(){this.targetImg=null;this.forever=!1;this.toTime=this.fromTime=0;this.animFrame=this.glCanvas=null}var f=null,k=null;g.prototype.drawImage=function(a){var b=new THREE.PlaneBufferGeometry(a.width,a.height,1,1);a=new THREE.Texture(a);a.needsUpdate=!0;a.minFilter=THREE.NearestFilter;var d=new THREE.AmbientLight(16777215);this.scene.add(d);
a=new THREE.MeshPhongMaterial({color:7829367,map:a});this.mesh=new THREE.Mesh(b,a);this.mesh.position.set(0,0,0);this.box=(new THREE.Box3).setFromObject(this.mesh);b=-(.225*(this.box.max.y-this.box.min.y))/(this.box.max.x-this.box.min.x)+.3;this.mesh.scale.set(b,b,b);this.box=(new THREE.Box3).setFromObject(this.mesh);this.scene.add(this.mesh);this.renderer.render(this.scene,this.camera)};g.prototype.render=function(){this.renderer.render(this.scene,this.camera)};h.prototype.start=function(){var a=
this;requestAnimationFrame(function(){a.start.call(a)});for(var b=0;b<this.functions.length;++b)this.functions[b].call(null,this.cv,this.clock.getElapsedTime(),this.clock.getDelta());this.clock.running||this.clock.start()};e.prototype.setTarget=function(a){this.targetImg=a;this.glCanvas=new g(a);this.glCanvas.drawImage(a);a.style.display="none"};e.prototype.setForever=function(){this.forever=!0};e.prototype.start=function(){var a=this,b=.5;this.glCanvas.sprite1.position.set(this.glCanvas.box.max.x,
this.glCanvas.box.max.y,0);this.glCanvas.sprite2.position.set(this.glCanvas.box.min.x,this.glCanvas.box.min.y,0);(new h([function(d,c,e){if(a.glCanvas.sprite1.position.x>a.glCanvas.box.max.x||a.glCanvas.sprite1.position.x<a.glCanvas.box.min.x)b=-b;a.glCanvas.sprite1.position.x+=b;a.glCanvas.sprite2.position.x-=b},function(a,b,e){a.render()}],this.glCanvas)).start()};return{effect:e,apply:function(a,b,d){f=d;k=$(f);var c=f.appendChild(document.createElement("img"));c.addEventListener("load",function(){a.setTarget(c);
a.setForever();f.removeChild(c);a.start()});c.style.position="absolute";c.width=k.innerWidth();c.src=b}}}();