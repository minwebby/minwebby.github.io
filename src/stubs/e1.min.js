var Waver=function(){function f(a,b,c){this.scene=new THREE.Scene;this.camera=new THREE.OrthographicCamera(a.width/-2,a.width/2,a.height/2,a.height/-2,0,1E3);this.camera.position.z=0;this.renderer=new THREE.WebGLRenderer;this.renderer.setSize(a.width,a.height);a.parentNode.appendChild(this.renderer.domElement);monitorWindow.register(this.renderer,this.camera,a.width,a.height);this.uniforms={}}function g(a,b){this.functions=a?a:[];this.clock=new THREE.Clock(!0);this.cv=b}function c(){this.targetImg=
null;this.forever=!1;this.toTime=this.fromTime=0;this.animFrame=this.glCanvas=null}var e={},h=!1;f.prototype.drawImage=function(a){var b=new THREE.PlaneBufferGeometry(a.width,a.height,1,1);a=new THREE.Texture(a);a.needsUpdate=!0;a.minFilter=THREE.NearestFilter;var c=new THREE.AmbientLight(16777215);this.scene.add(c);this.uniforms={time:{type:"f",value:1},resolution:{type:"v2",value:new THREE.Vector2},texture:{type:"t",value:a}};a=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:document.getElementById("vs0").textContent,
fragmentShader:document.getElementById("fs0").textContent});b=new THREE.Mesh(b,a);b.position.x=0;b.position.y=0;b.position.z=0;this.scene.add(b);this.renderer.render(this.scene,this.camera)};f.prototype.render=function(){this.renderer.render(this.scene,this.camera)};g.prototype.start=function(){var a=this;requestAnimationFrame(function(){a.start.call(a)});for(var b=0;b<this.functions.length;++b)this.functions[b].call(null,this.cv,this.clock.getElapsedTime());this.clock.running||this.clock.start()};
c.prototype.setTarget=function(a){this.targetImg=a;this.glCanvas=new f(a);this.glCanvas.drawImage(a);a.style.display="none"};c.prototype.setForever=function(){this.forever=!0};c.prototype.start=function(){(new g([function(a,b){a.uniforms.time.value=b},function(a,b){a.render()}],this.glCanvas)).start()};c.prototype.show=function(){$(this.glCanvas.renderer.domElement).show()};c.prototype.hide=function(){$(this.glCanvas.renderer.domElement).hide()};return{effect:c,apply:function(a,b){var c=document.getElementById("bgholder"),
d=c.appendChild(document.createElement("img"));d.addEventListener("load",function(){e.start=function(){a.setTarget(d);a.setForever();c.removeChild(d);a.start();h=!0};e.isStarted=function(){return h};e.hide=function(){a.hide()};e.show=function(){a.show()}});d.width=document.documentElement?document.documentElement.offsetWidth:$(window).width();d.height=document.documentElement?document.documentElement.offsetHeight:window.innerHeight;d.src=b},mkawesome:e}}();